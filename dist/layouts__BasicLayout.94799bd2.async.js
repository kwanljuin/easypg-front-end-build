(self["webpackChunk"]=self["webpackChunk"]||[]).push([[34],{80874:function(e){e.exports={cartHeader:"cartHeader___2Dt7t",cartIcon:"cartIcon____KUNe",cartContent:"cartContent___msX3N",cartFooter:"cartFooter___2vfC3"}},49552:function(e){e.exports={body:"body___37TZY",layout:"layout___1W-K9",layoutBackground:"layoutBackground___1AVYm",logo:"logo___z4Qt_",header:"header___1BmFd",rightSlider:"rightSlider___2gs3Q"}},20402:function(e){e.exports={cashBalance:"cashBalance___bbstC"}},8847:function(e,t,n){"use strict";n(67294);var i=n(85893),s=e=>{var t=e.children;return(0,i.jsx)("div",{style:{display:"flex",flexFlow:"column",justifyContent:"center"},children:t})};t["Z"]=s},49539:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});n(71194);var i=n(50146),s=(n(20228),n(11382)),l=(n(13062),n(71230)),a=(n(65011),n(49288)),o=(n(49111),n(19650)),r=(n(57663),n(71577)),d=(n(34792),n(48086)),c=n(3182),u=n(2824),j=(n(402),n(70647)),h=n(94043),v=n.n(h),g=n(7945),p=n(67724),A=n(8812),m=n(17244),x=n(67294),y=n(77705),f=n(72709),E=function(){var e=(0,c.Z)(v().mark((function e(t){var n;return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("file",t.file),n.append("printer_name",t.printerName),e.abrupt("return",f.MW.post("/controller/print-ticket",n,{}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=n(45004),k=n(68438),b=n(8847),Q=n(85893),C=j.Z.Text,I=e=>{var t=e.file,n=e.onOpen,j=e.onClose,h=e.modalTitle,f=e.buttonTitle,I=e.showModal,w=e.showTrigger,B=e.printerType,S=(0,Z.dz)(),T=S.height,N=(0,x.useState)(I),P=(0,u.Z)(N,2),z=P[0],F=P[1],R=(0,x.useState)(0),M=(0,u.Z)(R,2),D=M[0],J=M[1],K=(0,x.useState)(1),U=(0,u.Z)(K,2),Y=U[0],_=U[1],H=(0,x.useState)(!1),L=(0,u.Z)(H,2),q=L[0],G=L[1],W=(0,x.useState)("ticket"===B?(0,k.jy)(k.G8):(0,k.jy)(k.di)),O=(0,u.Z)(W,2),V=O[0],X=O[1],$=(0,x.useState)([]),ee=(0,u.Z)($,2),te=ee[0],ne=(ee[1],function(){var e=(0,c.Z)(v().mark((function e(){return v().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(G(!0),F(!0),!n){e.next=5;break}return e.next=5,n();case 5:G(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ie=()=>{F(!1),G(!1),null!=j&&j()},se={openModal:ne},le=(0,x.useState)(se),ae=(0,u.Z)(le,1),oe=ae[0];(0,x.useEffect)((()=>{var e="ticket"===B?(0,k.jy)(k.G8):(0,k.jy)(k.di);X(e),I&&oe.openModal()}),[oe,B,I]);var re=e=>{var t=e.numPages;J(t),_(1)},de=e=>{_((t=>t+e))},ce=()=>{de(-1)},ue=()=>{de(1)},je=e=>{X(e)},he=()=>{null!=V?((0,k.qQ)("ticket"===B?k.G8:k.di,V),E({file:t,printerName:V}).then((e=>{d.ZP.success("Please wait for the print to finish.")})).catch((e=>{d.ZP.error("Something went wrong while printing, ".concat(e.toString()))}))):d.ZP.error("Printer Name cannot be empty")};return(0,Q.jsxs)(Q.Fragment,{children:[w&&(0,Q.jsx)(r.Z,{type:"default",icon:(0,Q.jsx)(g.Z,{}),onClick:ne,children:f},(0,m.x0)()),(0,Q.jsx)(i.Z,{destroyOnClose:!0,title:h,visible:z,width:850,onCancel:ie,footer:(0,Q.jsxs)(l.Z,{align:"middle",justify:"space-between",children:[(0,Q.jsx)("div",{}),(0,Q.jsxs)(o.Z,{align:"center",size:"middle",children:[(0,Q.jsx)(r.Z,{shape:"circle",icon:(0,Q.jsx)(p.Z,{}),onClick:ce,disabled:Y<=1}),(0,Q.jsxs)(C,{children:["Page ",Y||(D?1:"--")," of ",D||"--"]}),(0,Q.jsx)(r.Z,{shape:"circle",onClick:ue,icon:(0,Q.jsx)(A.Z,{}),disabled:Y>=D})]}),(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"middle"},children:[(0,Q.jsx)(a.Z,{size:"large",placeholder:"Printer Name",options:te,onChange:je,value:V,style:{width:200,marginRight:4,textAlign:"left"}}),(0,Q.jsx)(r.Z,{type:"primary",size:"large",onClick:he,icon:(0,Q.jsx)(g.Z,{}),disabled:null==t||null==V,children:"Print"})]})]}),centered:!0,children:q?(0,Q.jsx)("div",{style:{height:200,padding:100},children:(0,Q.jsx)(b.Z,{children:(0,Q.jsx)(s.Z,{size:"large"})})}):(0,Q.jsx)("div",{style:{height:.7*T,overflow:"scroll",display:"flex",justifyContent:"center",paddingTop:16,paddingBottom:16,background:"#818181"},children:(0,Q.jsx)(y.BB,{file:t,onLoadSuccess:re,children:(0,Q.jsx)(y.T3,{pageNumber:Y,width:600})})})})]})};I.defaultProps={showModal:!1,showTrigger:!0,onOpen:void 0,onClose:void 0,printerType:"ticket"};var w=I},40117:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Te}});n(57663);var i=n(71577),s=(n(57338),n(25084)),l=(n(30887),n(28682)),a=(n(58024),n(39144)),o=(n(74379),n(38648)),r=n(3182),d=n(2824),c=(n(24793),n(97183)),u=(n(402),n(70647)),j=n(94043),h=n.n(j),v=n(59271),g=n(99008),p=n(55035),A=n(42762),m=n(67294),x=n(28168),y=n(73677),f=n.n(y),E=(n(20228),n(11382)),Z=(n(54421),n(38272)),k=(n(49111),n(19650)),b=(n(38979),n(59466)),Q=(n(12968),n(62462)),C=(n(89032),n(15746)),I=(n(94233),n(51890)),w=(n(62350),n(75443)),B=(n(71153),n(60331)),S=(n(48736),n(27049)),T=(n(13062),n(71230)),N=n(62497),P=n(73171),z=n(89366),F=n(60872),R=n(30381),M=n.n(R),D=n(17244),J=n(7118),K=n.n(J),U=n(66502),Y=n(45004),_=n(68438),H=(n(84305),n(75901)),L=(n(71194),n(50146)),q=(n(88983),n(47933)),G=(n(77883),n(70507)),W=(n(34792),n(48086)),O=n(18253),V=n(20650),X=(n(57106),n(99683)),$=n(49539),ee=n(85893),te=e=>{var t=e.isModalVisible,n=e.receiptPdf,i=e.pawnTicketPdf,s=(0,m.useState)(t),l=(0,d.Z)(s,2),a=l[0],o=l[1];return(0,m.useEffect)((()=>{o(t)}),[t]),(0,ee.jsx)(L.Z,{title:"Result",visible:a,footer:null,onCancel:()=>o(!1),destroyOnClose:!0,children:(0,ee.jsx)(X.ZP,{status:"success",title:"Checkout Successfully",subTitle:"Horray!",extra:[(0,ee.jsx)($.Z,{modalTitle:"Print Pawn Ticket Priview",buttonTitle:"Print Pawn Ticket",file:i}),(0,ee.jsx)($.Z,{modalTitle:"Print Receipt Priview",buttonTitle:"Print Receipt",file:n,printerType:"receipt"})]})})};te.defaultProps={isModalVisible:!1,receiptPdf:void 0,pawnTicketPdf:void 0};var ne=te,ie=u.Z.Text,se=()=>{var e=(0,x.I0)(),t=(0,x.v9)((e=>e.user)),n=t.currentUser,s=(0,x.v9)((e=>e.transaction)),l=s.cartItems,a=s.totalAmt,c=(0,x.v9)((e=>e.counter)),u=c.counter,j=(0,m.useState)(0),v=(0,d.Z)(j,2),g=v[0],p=v[1],A=(0,m.useState)(!1),y=(0,d.Z)(A,2),f=y[0],E=y[1],k=(0,m.useState)(!1),b=(0,d.Z)(k,2),Q=b[0],C=b[1],I=(0,m.useState)("cash"),w=(0,d.Z)(I,2),B=w[0],S=w[1],T=(0,m.useState)(),N=(0,d.Z)(T,2),P=N[0],z=N[1],F=(0,m.useState)(),R=(0,d.Z)(F,2),M=R[0],D=R[1],J=(0,m.useState)(!1),K=(0,d.Z)(J,2),U=K[0],Y=K[1],_=()=>{C(!0)},X=()=>{C(!1),Y(!1),p(0),S("cash")},$=e=>{p(+e)},te=e=>{S(e.target.value)},se=function(){var t=(0,r.Z)(h().mark((function t(){var i,s,a,r,d,c,j,v,p;return h().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(E(!0),i=localStorage.getItem("counterId"),null!=i){t.next=6;break}o.Z.error({message:"Shop Id not fouond, please login again"}),t.next=11;break;case 6:return d={userId:null===n||void 0===n?void 0:n._id,counterId:i,shopId:null===u||void 0===u||null===(s=u.shopId)||void 0===s?void 0:s._id,paid:g,paymentMethod:B,customerId:null===(a=l[0])||void 0===a||null===(r=a.customer)||void 0===r?void 0:r._id,cartItems:l.map((e=>({actionType:e.actionType,content:e.transactionDetails})))},t.next=9,(0,V.JE)(d);case 9:c=t.sent,null==(null===c||void 0===c?void 0:c.ok)&&(e({type:"transaction/setCartItems",payload:[]}),e({type:"ticket/setMainPawnTickets",payload:[]}),e({type:"customer/setCustomer",payload:void 0}),e({type:"counter/getCounterById",id:i}),e({type:"ticket/getLatestTicket",params:{shopId:null===u||void 0===u||null===(j=u.shopId)||void 0===j?void 0:j._id}}),W.ZP.success("Checkout Success!"),X(),v=new Blob([new Uint8Array(Object.values(c.receiptPdf)).buffer],{type:"application/pdf"}),p=new Blob([new Uint8Array(Object.values(c.pawnTicketPdf)).buffer],{type:"application/pdf"}),z(v),D(p),Y(!0));case 11:E(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,ee.jsxs)(H.ZP,{locale:O.Z,children:[(0,ee.jsx)(i.Z,{block:!0,type:"primary",onClick:_,size:"large",loading:f,disabled:null==l||l.length<1,children:"Checkout"}),(0,ee.jsxs)(L.Z,{title:"Checkout Summary",visible:Q,width:600,footer:null,onCancel:X,centered:!0,destroyOnClose:!0,children:[(0,ee.jsxs)(Z.ZP,{style:{marginBottom:16},children:[(0,ee.jsxs)(Z.ZP.Item,{children:[(0,ee.jsx)(Z.ZP.Item.Meta,{title:"Total Amount"}),(0,ee.jsxs)(ie,{children:["RM ",a.toFixed(2)]})]}),(0,ee.jsxs)(Z.ZP.Item,{children:[(0,ee.jsx)(Z.ZP.Item.Meta,{title:"Paid Amount"}),(0,ee.jsx)(G.Z,{prefix:"RM",style:{width:160},defaultValue:0,onChange:$})]}),(0,ee.jsxs)(Z.ZP.Item,{children:[(0,ee.jsx)(Z.ZP.Item.Meta,{title:"Balance"}),(0,ee.jsxs)(ie,{children:["RM ",(a-g).toFixed(2)]})]}),(0,ee.jsxs)(Z.ZP.Item,{children:[(0,ee.jsx)(Z.ZP.Item.Meta,{title:"Payment Method"}),(0,ee.jsxs)(q.ZP.Group,{onChange:te,defaultValue:"cash",children:[(0,ee.jsx)(q.ZP.Button,{value:"cash",children:"Cash"}),(0,ee.jsx)(q.ZP.Button,{value:"creditcard",children:"Credit Card"}),(0,ee.jsx)(q.ZP.Button,{value:"bank",children:"Bank Transfer"})]})]})]}),(0,ee.jsx)(i.Z,{block:!0,type:"primary",size:"large",onClick:se,loading:f,children:"Confirm Checkout"})]}),(0,ee.jsx)(ne,{isModalVisible:U,receiptPdf:P,pawnTicketPdf:M})]})},le=se,ae=n(80874),oe=n.n(ae),re=u.Z.Text,de=e=>{e.collapsed,e.onCollapse;var t,n=(0,x.I0)(),s=((0,F.Z)(),(0,x.v9)((e=>e))),l=(s.settings,(0,x.v9)((e=>e.transaction))),o=l.cartItems,r=l.totalAmt,c=(0,x.v9)((e=>e.loading.models.transaction)),u=(0,x.v9)((e=>e.counter)),j=u.counter,h=(0,x.v9)((e=>e.ticket)),v=h.latestTicket;(0,Y.Dp)((()=>{var e=(0,_.jy)(_.qW);null!=e&&n({type:"transaction/setCartItems",payload:e})}));var g=e=>n({type:"ticket/getLatestTicket",params:e}),p={cb:g},A=m.useState(p),y=(0,d.Z)(A,1),f=y[0];(0,m.useEffect)((()=>{var e;null!=(null===j||void 0===j||null===(e=j.shopId)||void 0===e?void 0:e._id)&&f.cb({filters:{shopId:j.shopId._id}})}),[f,null===j||void 0===j||null===(t=j.shopId)||void 0===t?void 0:t._id]);var R=e=>{o.splice(e,1),n({type:"transaction/setCartItems",payload:o})};return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{className:oe().cartHeader,children:[(0,ee.jsx)(N.Z,{className:oe().cartIcon}),(0,ee.jsx)("span",{children:"Cart"})]}),(0,ee.jsxs)("div",{className:oe().cartContent,children:[null!=(null===v||void 0===v?void 0:v.pawnNo)&&(0,ee.jsx)(T.Z,{style:{padding:16},justify:"center",children:(0,ee.jsxs)(re,{strong:!0,style:{color:"#d8d8d8"},children:["Last Created: ",v.pawnNo]})}),null==o||o.length<1?(0,ee.jsx)(S.Z,{style:{color:"white",borderTop:0,borderTopColor:"#5c5c5c",padding:"40px 20px"},children:"No item in cart"}):(0,ee.jsx)(Z.ZP,{size:"small",grid:{column:1},dataSource:o,renderItem:(e,t)=>{var n,s,l,o,r,d,c,u,j,h,v,g,p,A,m,x,y,f,E,N,F,J,Y,_,H,L,q,G,W,O,V,X,$,te,ne,ie,se,le,ae,oe,de,ce,ue,je,he,ve,ge;return(0,ee.jsx)(Z.ZP.Item,{children:(0,ee.jsxs)(a.Z,{size:"small",children:[(0,ee.jsxs)(T.Z,{justify:"space-between",children:[(0,ee.jsxs)("div",{children:[(0,ee.jsx)(B.Z,{color:(0,U.n)(e.actionType),children:e.actionType}),(0,ee.jsx)(re,{strong:!0,children:null!==(n=null===e||void 0===e||null===(s=e.ticket)||void 0===s?void 0:s.pawnNo)&&void 0!==n?n:"NEW PAWN"})]}),(0,ee.jsx)(w.Z,{title:null!==e&&void 0!==e&&null!==(l=e.ticket)&&void 0!==l&&l.pawnNo?"Are you sure to remove ticket\n                       ".concat(null===e||void 0===e||null===(o=e.ticket)||void 0===o?void 0:o.pawnNo,"?"):"Remove new pawn?",onConfirm:()=>R(t),okText:"Remove",cancelText:"Cancel",children:(0,ee.jsx)(i.Z,{type:"text",icon:(0,ee.jsx)(P.Z,{}),size:"small",danger:!0})})]}),(0,ee.jsx)(S.Z,{style:{margin:"10px 0 10px 0"}}),(0,ee.jsx)(T.Z,{children:(0,ee.jsxs)(T.Z,{align:"middle",gutter:16,children:[(0,ee.jsx)(C.Z,{children:(0,ee.jsx)(I.C,{icon:(0,ee.jsx)(z.Z,{}),src:null===e||void 0===e||null===(r=e.customer)||void 0===r||null===(d=r.imageFile)||void 0===d?void 0:d.publicUrl})}),(0,ee.jsxs)(C.Z,{children:[(0,ee.jsx)("h5",{style:{marginBottom:0},children:null===e||void 0===e||null===(c=e.customer)||void 0===c?void 0:c.fullName}),(0,ee.jsx)(re,{children:null===e||void 0===e||null===(u=e.customer)||void 0===u?void 0:u.nricPassport})]})]})}),(0,ee.jsx)(S.Z,{style:{margin:"8px 0 0 0"}}),(0,ee.jsxs)(k.Z,{align:"start",size:"small",children:[null!=(null===e||void 0===e||null===(j=e.transactionDetails)||void 0===j?void 0:j.imageFiles)&&(null===e||void 0===e||null===(h=e.transactionDetails)||void 0===h?void 0:h.imageFiles.length)>0||null!=(null===e||void 0===e||null===(v=e.ticket)||void 0===v||null===(g=v.pawnTicketsSubId)||void 0===g?void 0:g.imageFiles)&&(null===e||void 0===e||null===(p=e.ticket)||void 0===p||null===(A=p.pawnTicketsSubId)||void 0===A?void 0:A.imageFiles.length)>0?(0,ee.jsx)(b.Z,{autoplay:!0,children:null!=(null===e||void 0===e||null===(m=e.transactionDetails)||void 0===m?void 0:m.imageFiles)?null===e||void 0===e||null===(x=e.transactionDetails)||void 0===x?void 0:x.imageFiles.map((e=>(0,ee.jsx)(Q.Z,{width:100,height:100,src:"data:image/jpeg;base64,".concat(e)},(0,D.x0)()))):null!=(null===e||void 0===e||null===(y=e.ticket)||void 0===y||null===(f=y.pawnTicketsSubId)||void 0===f?void 0:f.imageFiles)&&(null===e||void 0===e||null===(E=e.ticket)||void 0===E||null===(N=E.pawnTicketsSubId)||void 0===N?void 0:N.imageFiles.length)>0&&(null===e||void 0===e||null===(F=e.ticket)||void 0===F||null===(J=F.pawnTicketsSubId)||void 0===J?void 0:J.imageFiles.map((e=>(0,ee.jsx)(Q.Z,{width:80,height:80,src:e.publicUrl},(0,D.x0)()))))}):(0,ee.jsx)(Q.Z,{width:80,height:80,src:"error",fallback:K()}),(0,ee.jsxs)(k.Z,{direction:"vertical",size:1,children:["NEW"===e.actionType&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(re,{children:["Principle: RM",null===e||void 0===e||null===(Y=e.transactionDetails)||void 0===Y||null===(_=Y.principalValue)||void 0===_?void 0:_.toFixed(2)]}),(0,ee.jsxs)(re,{children:["Pawn Type: ",null===e||void 0===e||null===(H=e.transactionDetails)||void 0===H?void 0:H.pawnType]}),(0,ee.jsxs)(re,{children:["Quantity:"," ",null===e||void 0===e||null===(L=e.transactionDetails)||void 0===L||null===(q=L.pawnItems)||void 0===q?void 0:q.reduce(((e,t)=>{var n;return e+(null!==(n=null===t||void 0===t?void 0:t.quantity)&&void 0!==n?n:0)}),0)]}),(0,ee.jsxs)(re,{children:["Weight: ",null===e||void 0===e||null===(G=e.transactionDetails)||void 0===G?void 0:G.totalWeight]})]}),"RENEW"===e.actionType&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(re,{children:["Principle: RM",null===e||void 0===e||null===(W=e.ticket)||void 0===W||null===(O=W.principalValue)||void 0===O?void 0:O.toFixed(2)]}),(0,ee.jsxs)(re,{children:["Interest: RM",null===e||void 0===e||null===(V=e.ticket)||void 0===V||null===(X=V.interestValue)||void 0===X?void 0:X.toFixed(2)]})]}),"REVALUE"===e.actionType&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(re,{children:["New Principle: RM",null===e||void 0===e||null===($=e.transactionDetails)||void 0===$?void 0:$.principalValue]}),(0,ee.jsxs)(re,{children:["Interest: RM",null===e||void 0===e||null===(te=e.ticket)||void 0===te||null===(ne=te.interestValue)||void 0===ne?void 0:ne.toFixed(2)]})]}),"REDEEM"===e.actionType&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(re,{children:["Principle: RM",null===e||void 0===e||null===(ie=e.ticket)||void 0===ie||null===(se=ie.principalValue)||void 0===se?void 0:se.toFixed(2)]}),(0,ee.jsxs)(re,{children:["Interest: RM",null===e||void 0===e||null===(le=e.ticket)||void 0===le||null===(ae=le.interestValue)||void 0===ae?void 0:ae.toFixed(2)]})]}),"EXTEND"===e.actionType&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(re,{children:["Extend Due Date:",M()(null===e||void 0===e||null===(oe=e.transactionDetails)||void 0===oe?void 0:oe.extendedDueDate).format("DD/MM/YYYY")]}),(0,ee.jsxs)(re,{children:["Extend Month Count: ",null===e||void 0===e||null===(de=e.transactionDetails)||void 0===de?void 0:de.extendMonthCount]})]}),null!=(null===e||void 0===e||null===(ce=e.transactionDetails)||void 0===ce?void 0:ce.discount)&&(null===e||void 0===e||null===(ue=e.transactionDetails)||void 0===ue?void 0:ue.discount)>0&&(0,ee.jsxs)(re,{children:["Discount: -RM",null===e||void 0===e||null===(je=e.transactionDetails)||void 0===je||null===(he=je.discount)||void 0===he?void 0:he.toFixed(2)]}),(0,ee.jsxs)(re,{strong:!0,style:{marginBottom:0},children:["Total: RM ",null===e||void 0===e||null===(ve=e.transactionDetails)||void 0===ve||null===(ge=ve.totalToPay)||void 0===ge?void 0:ge.toFixed(2)]})]})]})]})})}})]}),(0,ee.jsxs)("div",{className:oe().cartFooter,children:[(0,ee.jsxs)(T.Z,{justify:"space-between",align:"middle",style:{margin:"8px 0px 12px"},children:[(0,ee.jsx)(re,{style:{color:"#fff",fontSize:20},children:"Total:"}),c?(0,ee.jsx)(E.Z,{}):(0,ee.jsxs)(re,{style:{color:"#fff",fontSize:20},children:[" RM ",r.toFixed(2)]})]}),(0,ee.jsx)(le,{})]})]})},ce=de,ue=(n(8963),n(49471)),je=n(8870),he=n(20402),ve=n.n(he),ge=n(49101),pe=n(37476),Ae=n(86615),me=n(5436),xe=e=>{var t=e.title,n=e.modalTitle,s=e.buttonType,l=e.callback,a=(0,x.I0)(),o=(0,x.v9)((e=>e.loading.models.cashFlow)),d=(0,x.v9)((e=>e.counter)),c=d.counter,u=function(){var e=(0,r.Z)(h().mark((function e(t){return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({type:"counter/requestCash",counterId:null===c||void 0===c?void 0:c._id,payload:t});case 3:return l(),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,ee.jsx)(H.ZP,{locale:O.Z,children:(0,ee.jsxs)(pe.Y,{title:n||t,width:400,trigger:(0,ee.jsx)(i.Z,{type:s,icon:(0,ee.jsx)(ge.Z,{}),loading:o,shape:"round",children:t},"button"),submitter:{searchConfig:{submitText:"Submit"}},autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,centered:!0,onCancel:()=>console.log("run")},onFinish:u,children:[(0,ee.jsx)(Ae.Z.Group,{name:"type",label:"Type",radioType:"button",rules:[{required:!0,message:"This field is required"}],options:[{label:"Deposit",value:"Deposit"},{label:"Withdrawal",value:"Withdrawal"}]}),(0,ee.jsx)(me.Z,{width:"md",name:"amount",label:"Amount",customSymbol:"RM",rules:[{required:!0,message:"This field is required"}]})]})})};xe.defaultProps={modalTitle:void 0,buttonType:"default"};var ye=xe,fe=u.Z.Title,Ee=e=>{var t=(0,x.I0)(),n=(0,x.v9)((e=>e.loading.models.cashFlow)),i=(0,x.v9)((e=>e.counter)),s=i.counter,l=(0,x.v9)((e=>e.cashFlow)),o=(0,m.useState)(!1),r=(0,d.Z)(o,2),c=r[0],u=r[1],j=(0,m.useState)(!1),h=(0,d.Z)(j,2),v=h[0],g=(h[1],(0,m.useMemo)((()=>({pagination:{current:1,pageSize:10},sortOrder:"desc",sortField:"createdAt",search:{},filters:{counterId:null===s||void 0===s?void 0:s._id}})),[null===s||void 0===s?void 0:s._id])),p=(0,m.useState)(g.pagination),A=(0,d.Z)(p,2),y=A[0],f=A[1],E={total:l.total,showSizeChanger:!0,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items"),current:y.current,pageSize:y.pageSize},Z=e=>t({type:"cashFlow/getCounterTransactions",params:e}),b={cb:Z},Q=m.useState(b),C=(0,d.Z)(Q,1),I=C[0];(0,m.useEffect)((()=>{null!==s&&void 0!==s&&s._id&&(I.cb(g),f(g.pagination))}),[I,g,null===s||void 0===s?void 0:s._id]);var w=(e,n,i)=>{var s,l;t({type:"cashFlow/getCounterTransactions",params:(0,je.Z)((0,je.Z)({},g),{},{pagination:e,filters:n,sorter:i})}),f({current:null!==(s=e.current)&&void 0!==s?s:1,pageSize:null!==(l=e.pageSize)&&void 0!==l?l:10})},S=()=>{u(!0)},T=()=>{u(!1)},N=[{title:"Created At",key:"createdAt",dataIndex:"createdAt",render:e=>M()(e).format("DD/MM/YYYY")},{title:"Status",key:"status",dataIndex:"status"},{title:"Type",key:"type",dataIndex:"type",render:e=>e?(0,ee.jsx)(B.Z,{color:"Deposit"===e?"green":"red",children:e}):"-"},{title:"Amount(RM)",key:"amount",dataIndex:"amount",render:e=>null===e||void 0===e?void 0:e.toFixed(2)}];return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(a.Z,{size:"small",bodyStyle:{padding:"2px 12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},className:ve().cashBalance,loading:!1,onClick:S,children:[(0,ee.jsx)("span",{children:"Available Balance"}),(0,ee.jsxs)("h5",{children:[((null===s||void 0===s?void 0:s.availableBalance)||0)<0&&"-","RM"," ",Math.abs((null===s||void 0===s?void 0:s.availableBalance)||0).toFixed(2)]})]}),(0,ee.jsxs)(L.Z,{title:"Cash Flow",visible:c,width:800,confirmLoading:v,onCancel:T,footer:null,centered:!0,children:[(0,ee.jsx)("div",{style:{marginBottom:16},children:(0,ee.jsxs)(k.Z,{align:"center",size:"large",children:[(0,ee.jsxs)(fe,{level:5,style:{margin:0},children:["Available Balance: ",((null===s||void 0===s?void 0:s.availableBalance)||0)<0&&"-","RM"," ",Math.abs((null===s||void 0===s?void 0:s.availableBalance)||0).toFixed(2)]}),(0,ee.jsx)(ye,{title:"New Request",buttonType:"primary",callback:()=>Z()})]})}),(0,ee.jsx)(ue.Z,{rowKey:"_id",columns:N,dataSource:l.counterTransactions,pagination:E,loading:n,onChange:w})]})]})},Ze=Ee,ke=n(49552),be=n.n(ke),Qe=u.Z.Title,Ce=u.Z.Text,Ie=c.Z.Sider,we=c.Z.Header,Be=c.Z.Content,Se=e=>{var t,n=e.children,u=(e.route,(0,x.I0)()),j=(0,m.useState)(!1),y=(0,d.Z)(j,2),E=y[0],Z=y[1],k=(0,m.useState)(!1),b=(0,d.Z)(k,2),Q=b[0],C=b[1],I=(0,m.useState)(!1),w=(0,d.Z)(I,2),B=(w[0],w[1],(0,x.v9)((e=>e.counter))),S=B.counter,T=(0,x.v9)((e=>e.user)),N=T.currentUser,P=(0,x.v9)((e=>e.loading.models.user)),z=(0,x.v9)((e=>e.loading.models.counter));(0,Y.Dp)((0,r.Z)(h().mark((function e(){var t,n,i,s;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("counterId"),null!=t){e.next=6;break}o.Z.error({message:"Counter not fouond, please login again"}),u({type:"auth/logout"}),e.next=16;break;case 6:return e.next=8,u({type:"user/getCurrentUser"});case 8:return e.next=10,u({type:"counter/getCounterById",id:t});case 10:if(null===S||void 0===S||null===(n=S.shopId)||void 0===n||!n._id){e.next=15;break}return e.next=13,u({type:"config/getPrintTicketSetting",shopId:null===(i=S.shopId)||void 0===i?void 0:i._id});case 13:return e.next=15,u({type:"config/getPrintReceiptSetting",shopId:null===(s=S.shopId)||void 0===s?void 0:s._id});case 15:!1===z&&!1===P&&(null!=S&&null!=N||u({type:"auth/logout"}));case 16:case"end":return e.stop()}}),e)}))));var F=e=>{var t=e.key;"logout"!==t?"home"!==t?x.m8.push("/".concat(t)):x.m8.push("/"):u({type:"auth/logout"})},R=[{path:"/",name:"home",label:"Home",icon:(0,ee.jsx)(v.Z,{})},{path:"/receipts",name:"receipts",label:"Receipts",icon:(0,ee.jsx)(g.Z,{})},{path:"/auth/logout",name:"logout",label:"Logout",icon:(0,ee.jsx)(p.Z,{})}];return(0,ee.jsxs)("div",{className:be().body,children:[(0,ee.jsxs)(s.Z,{placement:"left",width:350,onClose:()=>Z(!1),visible:E,headerStyle:{padding:"24px 0 16px 22px"},bodyStyle:{padding:0},children:[(0,ee.jsxs)(a.Z,{children:[(0,ee.jsx)(Qe,{level:5,children:null===S||void 0===S||null===(t=S.shopId)||void 0===t?void 0:t.shopFullName}),(0,ee.jsxs)(Ce,{type:"secondary",children:["Station ID: ",null===S||void 0===S?void 0:S.stationId]})]}),(0,ee.jsx)(l.Z,{mode:"inline",defaultSelectedKeys:["Home"],onClick:F,children:R.map((e=>(0,ee.jsx)(l.Z.Item,{icon:e.icon,style:{height:50},children:e.label},e.name)))})]}),(0,ee.jsxs)(c.Z,{className:be().layout,children:[(0,ee.jsxs)(c.Z,{className:be().layout,children:[(0,ee.jsxs)(we,{className:be().header,children:[(0,ee.jsx)(i.Z,{icon:(0,ee.jsx)(A.Z,{}),size:"large",onClick:()=>Z(!0)}),(0,ee.jsx)("img",{alt:"logo",className:be().logo,src:f()}),(0,ee.jsx)(Ze,{})]}),(0,ee.jsx)(Be,{className:be().layoutBackground,children:n})]}),(0,ee.jsx)(Ie,{className:be().rightSlider,width:340,trigger:null,children:(0,ee.jsx)(ce,{collapsed:Q,onCollapse:e=>C(e)})})]})]})},Te=Se},66502:function(e,t,n){"use strict";function i(e){switch(e){case"Active":return"green";case"Redeemed":return"red";case"Renewed":return"purple";case"Revalued":return"lime";case"Extended":return"volcano";default:return"default"}}function s(e){switch(e){case"NEW":return"green";case"REDEEM":return"red";case"RENEW":return"purple";case"REVALUE":return"lime";case"EXTEND":return"volcano";default:return"default"}}n.d(t,{r:function(){return i},n:function(){return s}})},45004:function(e,t,n){"use strict";n.d(t,{Dp:function(){return l},dz:function(){return o},Nr:function(){return r}});var i=n(2824),s=n(67294),l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];var a=(0,s.useState)(!1),o=(0,i.Z)(a,2),r=o[0],d=o[1],c=()=>d(!1);return(0,s.useEffect)((()=>{r||(d(!0),e(...n))}),[r,e,n]),[c]};function a(){var e=window,t=e.innerWidth,n=e.innerHeight;return{width:t,height:n}}function o(){var e=(0,s.useState)(a()),t=(0,i.Z)(e,2),n=t[0],l=t[1];return(0,s.useEffect)((()=>{function e(){l(a())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),n}function r(e,t){var n=(0,s.useState)(e),l=(0,i.Z)(n,2),a=l[0],o=l[1];return(0,s.useEffect)((()=>{var n=setTimeout((()=>o(e)),t||500);return()=>{clearTimeout(n)}}),[e,t]),a}},73677:function(e,t,n){e.exports=n.p+"static/logo.d3ec21a7.svg"},7118:function(e){e.exports="data:image/png;base64,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"},46700:function(e,t,n){var i={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":37930,"./se.js":37930,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":95606,"./ss.js":95606,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function s(e){var t=l(e);return n(t)}function l(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=l,e.exports=s,s.id=46700},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);